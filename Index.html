<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Siren Spotify</title>
    <link rel="stylesheet" href="https://use.typekit.net/sne0cjk.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@iconscout/unicons/css/line.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
               body {
            margin: 0;
            font-family: Arial, sans-serif;
            background-color: #181818;
            color: white;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
        }

        .wrapper {
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .container-left {
            width: 500px;
            height: 500px;
            background-image: url('fond.png');
            background-size: cover;
            background-position: center;
            padding: 20px;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .container-right {
            width: 350px;
            height: 500px;
            padding: 20px;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            margin-left: 20px;
            background-size: cover;
            background-position: center;
        }

        .banner img {
            width: 100%;
        }

        .image-placeholder {
            height: 25px;
            margin: 5px 0;
            display: flex;
            justify-content: left;
            align-items: left;
        }

        .image-placeholder img {
            height: 55px;
            float: left;
        }

        .image-placeholder2 img {
            width: 350px;
            float: left;
        }

        .popular {
            flex-grow: 1;
            margin-top: 15px;
        }

        .song {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 10px;
            margin-bottom: 5px;
            cursor: pointer;
        }

        .song-title {
            font-size: 10px;
            color: white;
            flex-grow: 1;
        }

        .song-details {
            font-size: 10px;
            color: #a3a3a3;
            display: flex;
            gap: 10px;
            justify-content: flex-end;
        }

        .player-container {
            max-width: 350px;
            background-color: #12121275;
            border-radius: 10px;
            padding: 20px;
            margin-top: auto;
            position: relative;
        }

        .controls {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-top: 20px;
        }

        .controls button {
            background: none;
            border: none;
            color: white;
            font-size: 15px;
            margin: 15px 15px 0 15px;
            cursor: pointer;
        }

        .controls button:hover {
            color: #9A88A1;
        }

        #replayBtn {
    background: none;
    border: none;
    color: #fff;
    font-size: 15px;
    margin: 15px 15px 0 15px;
    cursor: pointer;
    transition: color 0.3s ease;
}

#replayBtn.active {
    color: #9A88A1; /* Couleur différente quand Replay est activé */
}

#shuffleBtn {
    background: none;
    border: none;
    color: #fff;
    font-size: 15px;
    margin: 15px 15px 0 15px;
    cursor: pointer;
    transition: color 0.3s ease;
}

#shuffleBtn.active {
    color: #9A88A1; /* Couleur différente quand Shuffle est activé */
}

        .progress-container {
            width: 100%;
            margin-top: 20px;
            display: flex;
            flex-direction: column;
        }

        .progress-bar {
            width: 100%;
            height: 5px;
            background-color: #555;
            border-radius: 5px;
            cursor: pointer;
            position: relative;
        }

        .progress-bar span {
            position: absolute;
            top: 0;
            left: 0;
            height: 100%;
            background-color: #9A88A1;
            width: 0%;
            border-radius: 5px;
        }

        .time {
            display: flex;
            justify-content: space-between;
            margin-top: 5px;
        }

        .favorite-btn {
            position: absolute;
            top: 10px;
            right: 20px;
            font-size: 20px;
            cursor: pointer;
            color: #fff;
        }

        .favorite-btn.favorited {
            color: #ff4081;
        }

        .song-list {
            list-style-type: none;
            padding: 0;
        }

        .song-list li {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }

        .song-number {
            font-size: 12px;
            color: white;
            margin-right: 10px;
        }

        .song-list img {
            width: 25px;
            height: 25px;
            margin-right: 10px;
            border-radius: 3px;
        }

        /* Mobile Optimizations */
        @media (max-width: 768px) {
            /* Container principal */
            .wrapper {
                flex-direction: column;
                align-items: stretch;
            }

            /* Left container */
            .container-left {
                width: 100%;
                height: auto;
                margin-bottom: 20px;
            }

            /* Right container */
            .container-right {
                width: 100%;
                height: auto;
                margin-left: 0;
            }

            /* Player controls */
            .controls button {
                font-size: 20px;
                margin: 0 10px;
            }

            /* Banner image */
            .banner img {
                width: 100%;
            }

            /* Song title and details */
            .song-title, .song-details {
                font-size: 14px;
            }

            /* Progress bar */
            .progress-container {
                margin-top: 15px;
            }

            .progress-bar {
                height: 8px;
            }

            /* Player container */
            .player-container {
                padding: 10px;
            }

            .favorite-btn {
                font-size: 16px;
            }
        }

        /* Responsiveness for images */
        img {
            max-width: 100%;
            height: auto;
        }

    </style>
</head>
<body>
    <div class="wrapper">
        <div class="container-left">
            <div class="banner">
                <img src="eorya.png" alt="Eorya Banner">
            </div>
            <div class="image-placeholder">
                <img src="bouton.png" alt="Image 1">
            </div>
            <div class="popular">
                <h2>Popular</h2>
                <ul class="song-list">
                    <li class="song" data-url="https://www.dropbox.com/scl/fi/76rr3qkkqvf2m25or6wrs/Hope.MP3?raw=1" type="audio/mp3">
                        <span class="song-number">1.</span>
                        <img src="hope.png" alt="Icon 1">
                        <div class="song-title">HOPE IS THE THING WITH FEATHERS (COVER)</div>
                        <div class="song-details">
                            <span>57,032,922</span>
                            <span>3:50</span>
                        </div>
                    </li>
                    <li class="song" data-url="https://www.dropbox.com/scl/fi/z10hik4js98b1iv1q15h6/Hope2.MP3?raw=1" type="audio/mp3">
                        <span class="song-number">2.</span>
                        <img src="hope2.png" alt="Icon 2">
                        <div class="song-title">FALLIN’ TWICE</div>
                        <div class="song-details">
                            <span>247,950,276</span>
                            <span>3:05</span>
                        </div>
                    </li>
                </ul>
            </div>
        </div>

        <div class="container-right" id="container-right">
            <div class="image-placeholder2">
                <img src="haut.png" alt="Image 1">
            </div>
            <div class="player-container">
                <div class="favorite-btn" id="favorite-btn">♡</div>

                <div class="controls">
                    <button id="shuffleBtn" class="control-btn">
                        <i class="fas fa-random"></i>
                    </button>
                    
                    <button id="prev-btn"><i class="fas fa-backward"></i></button>
                    <button id="play-pause-btn"><i class="fas fa-play"></i>                    </button>
                    <button id="next-btn"><i class="fas fa-forward"></i>                    </button>
                    <button id="replayBtn" class="control-btn">
                        <i class="fas fa-redo"></i>
                    </button>
                    
                </div>

                <div class="progress-container">
                    <div class="progress-bar" id="progress-bar">
                        <span id="progress"></span>
                    </div>
                    <div class="time">
                        <span id="current-time">0:00</span>
                        <span id="duration">3:50</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Elements
        const playPauseBtn = document.getElementById('play-pause-btn');
        const progressBar = document.getElementById('progress-bar');
        const progress = document.getElementById('progress');
        const currentTime = document.getElementById('current-time');
        const duration = document.getElementById('duration');
        const prevBtn = document.getElementById('prev-btn');
        const nextBtn = document.getElementById('next-btn');
        const containerRight = document.getElementById('container-right');
        const favoriteBtn = document.getElementById('favorite-btn');

        // Audio
        const audio = new Audio();
        let isPlaying = false;

        // Song List
        const songs = [
            {
                title: 'HOPE IS THE THING WITH FEATHERS (COVER)',
                artist: 'Artist 1',
                url: 'https://www.dropbox.com/scl/fi/76rr3qkkqvf2m25or6wrs/Hope.MP3?rlkey=wmi0t0xn7h9yhalrk1hqpzrke&st=ntwuiny2&raw=1',
                background: 'hope.png',
                favorited: false,
                duration: 230, // 3:50
            },
            {
                title: 'FALLIN’ TWICE',
                artist: 'Artist 2',
                url: 'https://www.dropbox.com/scl/fi/z10hik4js98b1iv1q15h6/Hope2.MP3?rlkey=yq6beqx9pl9z49j1l9hwp4zzo&st=6y1pz4h9&raw=1',
                background: 'hope2.png',
                favorited: false,
                duration: 185, // 3:05
            },
        ];

        let currentSongIndex = 0;

        // Load song function
        function loadSong(song) {
            audio.src = song.url;
            audio.load();
            playPauseBtn.innerHTML = '<i class="fas fa-play"></i>'; // Icône play
            isPlaying = false;

            // Update the background image of container-right
            containerRight.style.backgroundImage = `url(${song.background})`;

            // Update the favorite button state
            favoriteBtn.classList.toggle('favorited', song.favorited);

            // Update the duration display
            duration.textContent = formatTime(song.duration);
        }

        // Format time function
        function formatTime(seconds) {
            const minutes = Math.floor(seconds / 60);
            const remainingSeconds = Math.floor(seconds % 60);
            return `${minutes}:${remainingSeconds < 10 ? '0' : ''}${remainingSeconds}`;
        }

        // Play/Pause functionality
        playPauseBtn.addEventListener('click', () => {
            if (isPlaying) {
                audio.pause();
                playPauseBtn.innerHTML = '<i class="fas fa-play"></i>'; // Icône play
            } else {
                audio.play();
                playPauseBtn.innerHTML = '<i class="fas fa-pause"></i>'; // Icône pause
            }
            isPlaying = !isPlaying;
        });

        // Update progress bar as audio plays
        audio.addEventListener('timeupdate', () => {
            const progressPercent = (audio.currentTime / audio.duration) * 100;
            progress.style.width = `${progressPercent}%`;
            currentTime.textContent = formatTime(audio.currentTime);
        });

        // Change progress on click
        progressBar.addEventListener('click', (event) => {
            const clickPosition = event.offsetX;
            const progressBarWidth = progressBar.offsetWidth;
            const newTime = (clickPosition / progressBarWidth) * audio.duration;
            audio.currentTime = newTime;
        });

        // Next and Prev buttons functionality
        nextBtn.addEventListener('click', () => {
            currentSongIndex = (currentSongIndex + 1) % songs.length;
            loadSong(songs[currentSongIndex]);
            audio.play();
            playPauseBtn.innerHTML = '<i class="fas fa-pause"></i>'; // Icône pause
        });

        prevBtn.addEventListener('click', () => {
            currentSongIndex = (currentSongIndex - 1 + songs.length) % songs.length;
            loadSong(songs[currentSongIndex]);
            audio.play();
            playPauseBtn.innerHTML = '<i class="fas fa-pause"></i>'; // Icône pause
        });

// Replay button functionality
const replayBtn = document.getElementById('replayBtn');
let isReplayActive = false;

replayBtn.addEventListener('click', () => {
    isReplayActive = !isReplayActive; // Toggle replay mode
    replayBtn.classList.toggle('active', isReplayActive); // Ajouter une classe pour changer la couleur

    if (isReplayActive) {
        audio.addEventListener('ended', replayMusic); // Activer le replay
    } else {
        audio.removeEventListener('ended', replayMusic); // Désactiver le replay
    }
});

// Fonction pour relancer la musique
function replayMusic() {
    audio.currentTime = 0;
    audio.play();
}

// Shuffle button functionality
const shuffleBtn = document.getElementById('shuffleBtn');
let isShuffleActive = false;

shuffleBtn.addEventListener('click', () => {
    isShuffleActive = !isShuffleActive; // Toggle shuffle mode
    shuffleBtn.classList.toggle('active', isShuffleActive); // Change color
});

// Fonction pour jouer une musique aléatoire
function playRandomSong() {
    let randomIndex;
    do {
        randomIndex = Math.floor(Math.random() * songs.length); // Choisir un index aléatoire
    } while (randomIndex === currentSongIndex); // Assure qu'on ne joue pas la même musique en boucle
    currentSongIndex = randomIndex;
    loadSong(songs[currentSongIndex]);
    audio.play();
    playPauseBtn.innerHTML = '<i class="fas fa-pause"></i>'; // Icône pause
}

// Fonction pour passer à la chanson suivante
function nextSong() {
    if (isShuffleActive) {
        playRandomSong(); // Mode aléatoire activé
    } else {
        currentSongIndex = (currentSongIndex + 1) % songs.length; // Lecture séquentielle
        loadSong(songs[currentSongIndex]);
        audio.play();
        playPauseBtn.innerHTML = '<i class="fas fa-pause"></i>'; // Icône pause
    }
}

// Modifier le bouton "Next" pour prendre en compte le mode aléatoire
nextBtn.addEventListener('click', nextSong);


// Fonction pour jouer une musique aléatoire
function playRandomSong() {
    let randomIndex;
    do {
        randomIndex = Math.floor(Math.random() * songs.length); // Choisir un index aléatoire
    } while (randomIndex === currentSongIndex); // Assure qu'on ne joue pas la même musique en boucle
    currentSongIndex = randomIndex;
    loadSong(songs[currentSongIndex]);
    audio.play();
    playPauseBtn.innerHTML = '<i class="fas fa-pause"></i>'; // Icône pause
}

// Modifier le bouton "Next" pour prendre en compte le mode aléatoire
nextBtn.addEventListener('click', () => {
    if (isShuffleActive) {
        playRandomSong(); // Mode aléatoire activé
    } else {
        currentSongIndex = (currentSongIndex + 1) % songs.length; // Lecture séquentielle
        loadSong(songs[currentSongIndex]);
        audio.play();
        playPauseBtn.innerHTML = '<i class="fas fa-pause"></i>'; // Icône pause
    }
});

        // Favorite button functionality
        favoriteBtn.addEventListener('click', () => {
            songs[currentSongIndex].favorited = !songs[currentSongIndex].favorited;
            favoriteBtn.classList.toggle('favorited', songs[currentSongIndex].favorited);
        });

        // Song list click event to load and play selected song
        const songItems = document.querySelectorAll('.song');
        songItems.forEach((item, index) => {
            item.addEventListener('click', () => {
                currentSongIndex = index;
                loadSong(songs[currentSongIndex]);
                audio.play();
                playPauseBtn.innerHTML = '<i class="fas fa-pause"></i>'; // Icône pause
            });
        });

        // Initialize the player with the first song
        loadSong(songs[currentSongIndex]);
    </script>
</body>
</html>
